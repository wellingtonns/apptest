# name: Build and Deploy App

# on:
#   push:
#     branches:
#       - main

# jobs:
#   call-build-and-deploy:
#     uses: wellingtonns/pipeline-template/.github/workflows/argocd-sync.yml@main
#     with:
#       IMAGE_NAME: welignton/apptest
#       APP_NAME: apptest
#     secrets: inherit

name: Build, Push e Deploy

on:
  push:
    branches:
      - main

jobs:
  build-and-push:
    uses: wellingtonns/app-template/.github/workflows/build-push-template.yml@main
    with:
      IMAGE_NAME: welignton/apptest
      APP_NAME: apptest
    secrets: inherit

  deploy-argocd:
    needs: build-and-push
    uses: wellingtonns/app-template/.github/workflows/argocd-sync-template.yml@main
    with:
      APP_NAME: apptest
    secrets: inherit
